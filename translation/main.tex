\documentclass{article}

\input{macros}
\usepackage{enumitem}
\usepackage{caption}

\begin{document}
  \section{Python Language Grammar}
  % This grammar is based on the AST defined in the python2_ast.ml file

  \begin{grammar}
    \grule[variables]{\pvariable}{}
    \grule[suites]{\psuite}{\gtobrk \pstmt; \ldots \gtcbrk}
    \grule[statements]{\pstmt}{
                \gtdef \gtopar \pvariable, \ldots \gtcpar \gtcolon \psuite \gline
        \gor    \gtreturn \pexpropt \gline
        \gor    \pexpr, \ldots \pexpr \gteq \pexpr \gline
        \gor    \pexpr \pbinop\gteq \pexpr \gline
        %I really don't care about print statements so I'm ignoring them
        \gor    \gtfor \pexpr \gtin \pexpr \gtcolon \psuite \gline
        \gor    \gtwhile \pexpr \gtcolon \psuite \gline
        \gor    \gtif \pexpr \gtcolon \psuite \gtelse \gtcolon \psuite \gline
        \gor    \gtraise \pexpropt, \pexpropt, \pexpropt \gline
        \gor    \gttry \gtcolon \psuite \gtobrk \pexcepthandler; \ldots \gtcbrk \gline
        \gor    \pexpr \gline
        \gor    \gtpass \gline
        \gor    \gtbreak \gline
        \gor    \gtcontinue \gline
    }
    \grule[expressions]{\pexpr}{
                \punop \pexpr \gline
        \gor    \pexpr \pbinop \pexpr \gline
        \gor    \pexpr \gtand \pexpr \gline
        \gor    \pexpr \gtor \pexpr \gline
        \gor    \pexpr \pcmpop \pexpr \gline
        \gor    \pexpr \gtif \pexpr \gtelse \pexpr \gline
        \gor    \pexpr \gtopar \pexpr, \dots \gtcpar \gline
        \gor    \pnum \gline
        \gor    \mathbb{S} \gline
        \gor    \mathbb{B} \gline
        \gor    \pexpr.\pvariable \gline
        \gor    \pexpr \gtobrk \pslice \gtcbrk \gline
        \gor    \pvariable \gline
        \gor    \gtobrk \pexpr, \dots \gtcbrk \gline
        \gor    \gtopar \pexpr, \dots \gtcpar \gline
        \gor    \gtNone \gline
    }
    \grule[unary operators]{\punop}{
                \gtuplus
           \gor \gtusub
           \gor \gtnot
    }
    \grule[binary operators]{\pbinop}{
                \gtplus
           \gor \gtsub
           \gor \gtmult
           \gor \gtdiv
           \gor \gtmod
           \gor \gtpow
    }
    \grule[comparison operators]{\pcmpop}{
                \gtiseq
           \gor \gtneq
           \gor \gtgeq
           \gor \gtleq
           \gor \gtge
           \gor \gtle
           \gor \gtis
           \gor \gtis \gtnot
           \gor \gtin
           \gor \gtnot \gtin
    }
    \grule[exception handlers]{\pexcepthandler}{
                \gtexcept \gtcolon \psuite \gline
           \gor \gtexcept \pexpr \gtcolon \psuite \gline
           \gor \gtexcept \pexpr \gtas \pexpr \gtcolon \psuite
    }
    \grule[slice]{\pslice}{
                \pexpr \gline
           \gor \pexpropt \gtcolon \pexpropt \gtcolon \pexpropt
    }
    \grule[numbers]{\pnum}{}
    \grule[strings]{\mathbb{S}}{}
    \grule[booleans]{\mathbb{B}}{
                \ostrue
        \gor    \osfalse
    }
  \end{grammar}

  \section{Python Simplified Grammar}
  % This grammar is based on the AST defined in the python2_ast.ml file

  \begin{grammar}
    \grule[variables]{\pvariable}{}
    \grule[suites]{\psuite}{\gtobrk \pstmt; \ldots \gtcbrk}
    \grule[statements]{\pstmt}{
                \gtreturn \pexpr \gline
        \gor    \pvariable \gteq \pexpr \gline
        \gor    \gtwhile \pvariable \gtcolon \psuite \gline
        \gor    \gtif \pexpr \gtcolon \psuite \gtelse \gtcolon \psuite \gline
        \gor    \gtraise \pexpr \gline
        \gor    \gttry \gtcolon \psuite \gtexcept \pvariable \gtcolon \psuite \gline
        \gor    \gtpass \gline
        \gor    \gtbreak \gline
        \gor    \gtcontinue \gline
        \gor    \pexpr \gline
    }
    \grule[expressions]{\pexpr}{
                \punop \pexpr \gline
        \gor    \pexpr \pbinop \pexpr \gline
        \gor    \pexpr \gtopar \pexpr, \dots \gtcpar \gline
        \gor    \pexpr.\pvariable \gline
        \gor    \gtobrk \pexpr, \dots \gtcbrk \gline
        \gor    \gtopar \pexpr, \dots \gtcpar \gline
        \gor    \pnum \gline
        \gor    \mathbb{S} \gline
        \gor    \mathbb{B} \gline
        \gor    \pvariable \gline
        \gor    \gtfun \gtopar \pexpr, \ldots \gtcpar \gtcolon \psuite \gline
        \gor    \pmagic
    }
    \grule[unary operators]{\punop}{
                \gtnot
    }
    \grule[binary operators]{\pbinop}{
                \gtis
    }
    \grule[numbers]{\pnum}{}
    \grule[strings]{\mathbb{S}}{}
    \grule[booleans]{\mathbb{B}}{
                \ostrue
        \gor    \osfalse
    }
    \grule[magic builtins]{\pmagic}{
                \gtbool
           \gor \gtslice
           \gor \gtValueError
           \gor \gtAttributeError \gline
           \gor \gtTypeError
           \gor \gtStopIteration
    }
  \end{grammar}

\end{document}
