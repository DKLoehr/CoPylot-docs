\documentclass{article}

\input{macros}
\usepackage{enumitem}
\usepackage{caption}

\begin{document}
  \section{Operational Semantics}

  \subsection{Lamia Lanugage Grammar}

  \begin{grammar}
    \grule[labels]{\olbl}{}
    \grule[value variables]{\ovalvariable}{}
    \grule[memory variables]{\omemvariable}{}
    \grule[blocks]{\ostmts}{
                \ostmt \gtsemi \ldots
    }
    \grule[statements]{\ostmt}{
                \olbl \gtcolon \odirective
    }
    \grule[odirective]{\odirective}{
                \gtlet \ovalvariable \gteq \oexpr
        \gor    \gtlet \omemvariable \gteq \gtalloc
        \gor    \gtlet \ovalvariable \gteq \ovalvariable
        \gor    \gtlet \omemvariable \gteq \omemvariable
        \gor
        \gline  \gtlet \ovalvariable \gteq \ovalvariable \gtobrc \ovalvariable \gtarrow \omemvariable \gtcbrc
        \gor    \gtlet \omemvariable \gteq \ovalvariable \gtobrc \ovalvariable \gtcbrc
        \gor    \ovalvariable \gtopar \omemvariable \gtcomma \ldots \gtcpar
        \gor    \gtstore \omemvariable\ \ovalvariable
        \gor
        \gline  \gtlet \ovalvariable \gteq \gtget \omemvariable
        \gor    \gtlet \ovalvariable \gteq \omemvariable \gtis \omemvariable
        \gor    \gtlet \ovalvariable \gteq \ounop \ovalvariable
        \gor    \gtlet \ovalvariable \gteq \ovalvariable \obinop \ovalvariable
        \gor
        \gline  \gtreturn \omemvariable
        \gor    \gtraise \omemvariable
        \gor    \gttry \gtobrc \ostmts \gtcbrc \gtexcept \ovalvariable \gtobrc \ostmts \gtcbrc
        \gor
        \gline  \gtlet \ovalvariable \gteq \gtif \ovalvariable \gtthen \gtobrc \ostmts \gtcbrc \gtelse \gtobrc \ostmts \gtcbrc
        \gor    \gtwhile \ovalvariable \gtdo \gtobrc \ostmts \gtcbrc
    }
    \grule[unary operators]{\ounop}{
                \gtnot
        \gor    \gthaskey
    }
    \grule[binary operators]{\obinop}{
                \gtintplus
        \gor    \gtintminus
        \gor    \gtand
        \gor    \gtor
    }
    \grule[value expressions]{\oexpr}{
                \mathbb{Z}
        \gor    \mathbb{S}
        \gor    \mathbb{B}
        \gor    \gtdef \gtopar \omemvariable, \ldots \gtcpar \gtobrc \ostmts \gtcbrc
        \gor    \osnone
    }
    \grule[strings]{\mathbb{S}}{}
    \grule[booleans]{\mathbb{B}}{
                \ostrue
        \gor    \osfalse
    }
  \end{grammar}

  \subsection{Lamia Evaluation Grammar}

  \begin{grammar}
    \grule[memory addresses]{\omem,\opscope}{}
    \grule[values]{\ovalue}{
                \mathbb{Z}
        \gor    \mathbb{S}
        \gor    \mathbb{B}
        \gor    [\omem, \ldots] % [m, ...]
        \gor    (\omem, \ldots) % (m, ...)
        \gor    \obinding % B
        \gor    \ogenf
        \gor    \ogenm
        \gor    \osnone
    }
    \grule[binding records]{\obinding}{
                \{ \mathbb{S} \mapsto \omem, \ldots \}
    }

  \end{grammar}
\end{document}
